<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/main}">

<head>
    <title th:text="${hotel.name} + ' - Chi ti·∫øt Kh√°ch s·∫°n'">Chi ti·∫øt Kh√°ch s·∫°n</title>
    <style>
        /* style button */
        .action-btn {
            font-size: 0.85rem;
            /* Nh·ªè h∆°n m·∫∑c ƒë·ªãnh m·ªôt ch√∫t */
            padding: 5px 12px;
            /* G·ªçn g√†ng, kh√¥ng th√¥ */
            border-radius: 20px;
            /* Bo tr√≤n m·ªÅm m·∫°i */
            transition: all 0.25s ease;
        }

        .action-btn i {
            font-size: 0.8rem;
        }

        /* üî∏ Hover cho n√∫t Xem */
        .view-detail-btn {
            background-color: #16a34a;
            /* Xanh l√° ƒë·∫≠m */
            border-color: #16a34a;
        }

        .view-detail-btn:hover {
            background-color: #facc15;
            /* V√†ng nh·∫π khi hover */
            border-color: #eab308;
            color: #fff;
            transform: scale(1.05);
            box-shadow: 0 0 6px rgba(234, 179, 8, 0.5);
        }

        /* üîπ Hover cho n√∫t Th√™m */
        .btn-primary.action-btn:hover {
            background-color: #2563eb;
            /* Xanh d∆∞∆°ng s√°ng h∆°n */
            transform: scale(1.05);
        }

        .btn-secondary.action-btn {
            opacity: 0.7;
            cursor: not-allowed;
        }


        /* style amenity */
        .amenity-item {
            display: flex;
            align-items: center;
            background: #f8fafc;
            border-radius: 20px;
            padding: 6px 12px;
            border: 1px solid #e2e8f0;
            transition: all 0.25s ease;
        }

        .amenity-item:hover {
            background: #e0f2fe;
            /* xanh nh·∫°t */
            border-color: #60a5fa;
            transform: translateY(-2px);
        }

        .amenity-icon {
            color: #22c55e;
            /* xanh l√° */
            margin-right: 8px;
            font-size: 1rem;
        }

        /* style price */
        .room-info {
            line-height: 1.5;
        }

        .room-name {
            color: #1e3a8a;
            /* Xanh navy ƒë·∫≠m */
            font-weight: 700;
            font-size: 1.15rem;
            margin-bottom: 6px;
            transition: all 0.3s ease;
        }

        .room-name:hover {
            color: #f59e0b;
            /* V√†ng nh·∫π khi hover */
            transform: translateX(3px);
        }

        .room-area {
            color: #64748b;
            /* X√°m trung t√≠nh */
            font-size: 0.9rem;
            display: flex;
            align-items: center;
        }

        .room-price {
            margin-top: 8px;
            display: flex;
            align-items: baseline;
            gap: 6px;
        }

        .price-box {
            background: #ecfdf5;
            /* Xanh l√° nh·∫°t */
            border: 1px solid #bbf7d0;
            /* Vi·ªÅn xanh pastel */
            border-radius: 10px;
            padding: 4px 12px;
            display: inline-block;
            font-weight: 700;
            color: #15803d;
            /* Xanh l√° ƒë·∫≠m */
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .price-box:hover {
            background: #bbf7d0;
            transform: scale(1.05);
        }

        .price-unit {
            color: #475569;
            /* X√°m ƒë·∫≠m */
            font-size: 0.9rem;
        }
    </style>

</head>

<body>
    <main layout:fragment="content">
        <div class="container py-4">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-md-3">
                    <div class="sticky-top" style="top: 20px;">
                        <!-- ƒê·∫∑t ngay -->
                        <div class="card mb-4 border-primary">
                            <div class="card-body text-center">
                                <button class="btn btn-primary btn-lg w-100" onclick="scrollToRooms()">
                                    <i class="fas fa-calendar-check me-2"></i>ƒê·∫∑t ngay
                                </button>
                            </div>
                        </div>

                        <!-- Th√¥ng tin th√†nh ph·ªë -->
                        <div class="card mb-4">
                            <div class="position-relative">
                                <img th:src="@{${hotel.urlCityImage}}" class="card-img-top" alt="Th√†nh ph·ªë"
                                    style="height: 200px; object-fit: cover;">

                            </div>
                            <div class="card-body">
                                <p class="card-text">M·ªôt trong nh·ªØng khu v·ª±c ƒë·∫πp nh·∫•t ·ªü <span
                                        th:text="${hotel.cityName}">th√†nh ph·ªë</span></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- N·ªôi dung ch√≠nh -->
                <div class="col-md-9">
                    <!-- Header kh√°ch s·∫°n -->
                    <div class="d-flex justify-content-between align-items-start mb-4">
                        <div>
                            <h1 class="display-6 fw-bold" th:text="${hotel.name}">T√™n kh√°ch s·∫°n</h1>
                            <p class="text-primary mb-2">
                                <i class="fas fa-map-marker-alt me-2"></i>
                                <span th:text="${hotel.address}">ƒê·ªãa ch·ªâ</span>
                            </p>
                        </div>
                        <button class="btn btn-primary" onclick="scrollToRooms()">
                            <i class="fas fa-calendar-check me-2"></i>ƒê·∫∑t ngay
                        </button>
                    </div>

                    <!-- H√¨nh ·∫£nh kh√°ch s·∫°n -->
                    <div class="card mb-4">
                        <img th:src="@{'/images/KhachSan/' + ${hotel.id} + '.jpg'}" class="card-img-top" alt="Kh√°ch s·∫°n"
                            style="height: 400px; object-fit: cover;">
                    </div>

                    <!-- Th√¥ng tin kh√°ch s·∫°n -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <div class="alert alert-warning" role="alert">
                                <i class="fas fa-star me-2"></i>
                                <strong>M·ªôt trong nh·ªØng ch·ªó ngh·ªâ thu·∫≠n ti·ªán cho vi·ªác tr·∫£i nghi·ªám nh·∫•t ·ªü <span
                                        th:text="${hotel.cityName}">th√†nh ph·ªë</span> c·ªßa ch√∫ng t√¥i!</strong>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Lo·∫°i kh√°ch s·∫°n:</strong> <span
                                            th:text="${hotel.typeHotelName}">Lo·∫°i</span></p>
                                    <p><strong>Gi√°p bi·ªÉn:</strong> <span
                                            th:text="${hotel.nearSea == 1 ? 'C√≥' : 'Kh√¥ng'}">Kh√¥ng</span></p>
                                </div>
                                <div class="col-md-6">
                                    <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> <span th:text="${hotel.phone}">0123456789</span>
                                    </p>
                                    <p><strong>ƒê√°nh gi√°:</strong>
                                        <span class="rating-stars" th:text="${hotel.evaluate} + ' ‚òÖ'">5 ‚òÖ</span>
                                    </p>
                                </div>
                            </div>

                            <div class="mt-3">
                                <h5>M√¥ t·∫£</h5>
                                <p th:text="${hotel.description}">M√¥ t·∫£ kh√°ch s·∫°n</p>
                            </div>
                        </div>
                    </div>

                    <!-- Danh s√°ch ph√≤ng -->
                    <!-- Ph√≤ng tr·ªëng -->
                    <div id="room-list" class="container py-3">
                        <h3 class="mb-4 text-left">
                            <i class="fas fa-door-open me-2"></i>Danh s√°ch ph√≤ng
                        </h3>

                        <!-- üîπ Form ki·ªÉm tra ph√≤ng tr·ªëng -->
                        <div class="card shadow-sm border-0 mb-4 bg-warning text-dark">
                            <div class="card-body">
                                <h5 class="mb-3 text-secondary">
                                    <i class="fas fa-calendar-alt me-2 text-primary"></i>
                                    B·∫°n mu·ªën ngh·ªâ t·∫°i
                                    <strong class="text-primary" th:text="${hotel.name}">kh√°ch s·∫°n</strong>
                                    v√†o l√∫c n√†o?
                                </h5>

                                <form th:action="@{/hotel/{id}/room-empty(id=${hotel.id})}" method="get"
                                    class="row g-3">
                                    <div class="col-md-4">
                                        <label for="ngayDen" class="form-label fw-bold text-secondary">Ng√†y nh·∫≠n
                                            ph√≤ng</label>
                                        <input type="date" class="form-control rounded-pill shadow-sm" id="ngayDen"
                                            name="ngayDen" th:value="${ngayDen}"
                                            th:min="${#temporals.format(#temporals.createNow(), 'yyyy-MM-dd')}"
                                            required>
                                    </div>

                                    <div class="col-md-4">
                                        <label for="ngayTra" class="form-label fw-bold text-secondary">Ng√†y tr·∫£
                                            ph√≤ng</label>
                                        <input type="date" class="form-control rounded-pill shadow-sm" id="ngayTra"
                                            name="ngayTra" th:value="${ngayTra}"
                                            th:min="${#temporals.format(#temporals.createNow(), 'yyyy-MM-dd')}"
                                            required>
                                    </div>

                                    <div class="col-md-4 d-flex align-items-end">
                                        <button type="submit" class="btn btn-primary w-100 rounded-pill py-2 shadow-sm">
                                            <i class="fas fa-search me-2"></i>Ki·ªÉm tra ph√≤ng tr·ªëng
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- üîπ Danh s√°ch ph√≤ng -->
                        <div class="card shadow-sm border-0" style="border-radius: 16px;">
                            <div class="card-body p-0">
                                <table class="table table-hover align-middle mb-0">
                                    <thead class="table-primary text-start">
                                        <tr>
                                            <th style="width: 15%;">S·ªë gi∆∞·ªùng</th>
                                            <th style="width: 30%;">Lo·∫°i ph√≤ng</th>
                                            <th style="width: 35%;">Ti·ªán √≠ch</th>
                                            <th style="width: 20%;">ƒê·∫∑t ph√≤ng</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="room : ${roomList}" class="border-bottom">
                                            <td class="text-center py-3">
                                                <i class="fas fa-bed fa-2x text-primary"></i><br>
                                                <small class="text-muted" th:text="${room.bed} + ' gi∆∞·ªùng'">1
                                                    gi∆∞·ªùng</small>
                                            </td>

                                            <td class="py-3">
                                                <div class="room-info">
                                                    <!-- üîπ T√™n ph√≤ng -->
                                                    <h5 class="room-name" th:text="${room.name}">T√™n ph√≤ng</h5>

                                                    <!-- üîπ Di·ªán t√≠ch -->
                                                    <p class="room-area mb-2">
                                                        <i class="fas fa-ruler-combined me-1 text-secondary"></i>
                                                        <span th:text="${room.area}">0</span> m¬≤
                                                    </p>

                                                    <!-- üîπ Gi√° ph√≤ng -->
                                                    <p class="room-price mb-0">
                                                        <span class="price-box">
                                                            <span class="price-value"
                                                                th:text="${#numbers.formatInteger(room.price, 0, 'COMMA')}"></span>,000
                                                        </span>
                                                        <span class="price-unit">VND/ƒë√™m</span>
                                                    </p>
                                                </div>
                                            </td>


                                            <td class="text-start py-3">
                                                <div class="room-amenities">
                                                    <div th:if="${room.amenities != null and !room.amenities.empty}"
                                                        th:each="am : ${room.amenities}" class="amenity-item">
                                                        <i class="fas fa-leaf amenity-icon"></i>
                                                        <span th:text="${am.name}"></span>
                                                    </div>

                                                    <div
                                                        th:unless="${room.amenities != null and !room.amenities.empty}">
                                                        <em class="text-muted">Ch∆∞a c√≥ ti·ªán √≠ch</em>
                                                    </div>
                                                </div>
                                            </td>

                                            <td class="text-center py-3">
                                                <div class="d-flex justify-content-center gap-2">
                                                    <!-- üîπ N√∫t Xem chi ti·∫øt -->
                                                    <button class="btn btn-success btn-sm action-btn view-detail-btn"
                                                        th:data-room-id="${room.id}" onclick="viewRoomDetail(this)">
                                                        <i class="fas fa-eye me-1"></i> Xem
                                                    </button>

                                                    <!-- üîπ N√∫t Th√™m -->
                                                    <button class="btn btn-sm action-btn"
                                                        th:classappend="${daKiemTraroomTrong ?: false} ? 'btn-primary' : 'btn-secondary'"
                                                        th:data-room-id="${room.id}"
                                                        th:disabled="${!(daKiemTraroomTrong ?: false)}"
                                                        onclick="bookRoom(this)">
                                                        <i class="fas fa-plus me-1"></i> Th√™m
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- üîπ Kh√¥ng c√≥ ph√≤ng tr·ªëng -->
                        <div class="text-center py-5" th:if="${roomList == null or roomList.empty}">
                            <i class="fas fa-bed fa-3x text-muted mb-3"></i>
                            <h4 class="text-muted">Kh√¥ng c√≥ ph√≤ng tr·ªëng</h4>
                            <p class="text-muted">Vui l√≤ng th·ª≠ l·∫°i v·ªõi ng√†y kh√°c</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        function scrollToRooms() {
            document.getElementById('room-trong').scrollIntoView({ behavior: 'smooth' });
        }

        function bookRoom(button) {
            const roomId = button.getAttribute('data-room-id');
            const ngayDen = document.getElementById('ngayDen').value;
            const ngayTra = document.getElementById('ngayTra').value;

            if (!ngayDen || !ngayTra) {
                alert('Vui l√≤ng ch·ªçn ng√†y nh·∫≠n v√† tr·∫£ ph√≤ng!');
                return;
            }

            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒë·∫∑t ph√≤ng n√†y kh√¥ng?')) {
                window.location.href = `/dat-room/${roomId}?ngayDen=${ngayDen}&ngayTra=${ngayTra}`;
            }
        }
    </script>
</body>

</html>